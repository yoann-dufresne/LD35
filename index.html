<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The maze nightmare</title>

    <style type="text/css">
      .centered {
        text-align: center;
      }

      body {
        background-color: #444444;
      }

      .stats {
        position: absolute;
        top: 0px;
        visibility: hidden;
      }

      .pixi-container{
        margin-top: -40px;
      }

      .dialog{
        color: #EEEEEE;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 32px;
        line-height: 32px;
      }

      .hidden{
        display: none;
      }
    </style>

    <!--link rel="stylesheet" href="style.css"-->
  </head>
  <body>
    <audio id="audioPlayer" src="art/music.m4a" loop></audio>

    <div class="pixi-container centered"></div>
    <div class="stats"></div>

    <div id="d1" class="dialog centered hidden">
      Where am I? <br>
      What am I doing here?
    </div>

    <div id="d2" class="dialog centered hidden">
      It's impossible! <br>
      It must be a nightmare...
    </div>

    <div id="d3" class="dialog centered hidden">
      Look at those walls. They're horrible. <br>
      And... They're moving...
    </div>

    <div id="d4" class="dialog centered hidden">
      I will be trapped soon. <br>
      I must find something to wake me up.
    </div>

    <div id="dEnd" class="dialog centered hidden">
      I think I will stop here. <br> <br>
      The game is over. <br>
      You last:
    </div>


  </body>

  <script type="text/javascript" src="lib/stats.min.js"></script>
  <script type="text/javascript" src="lib/jquery-2.1.4.js"></script>
  <script type="text/javascript" src="lib/pixi.js"></script>
  <script type="text/javascript" src="lib/underscore.js"></script>
  <script type="text/javascript" src="src/tilesSheetInfo.js"></script>
  <script type="text/javascript" src="src/Assets.js"></script>
  <script type="text/javascript" src="src/Maze.js"></script>
  <script type="text/javascript" src="src/Input.js"></script>
  <script type="text/javascript" src="src/Controler.js"></script>
  <script type="text/javascript" src="src/Stage.js"></script>
  <script type="text/javascript" src="src/Vue.js"></script>

      <script type="text/javascript">
      var toggle = function(id_hide, id_show, dur){
        hide = $(id_hide);
        show = $(id_show);

        hide.fadeOut(dur);
        show.delay(dur).fadeIn(dur);
      }

      var gameOver = function(t1){
        var t2 = new Date();
        var survival = Math.round((t2 - t1)/1000);
        $("#dEnd").append(survival + " s.").show();
      }

      $(function(){
        var t1 = new Date();
        dur = 4000;
        $("#d1").show();
        setTimeout(function(){
          toggle("#d1", "#d2", dur)
        }, 0);
        setTimeout(function(){
          toggle("#d2", "#d3", dur)
        }, 2*dur);

        setTimeout(function(){
          toggle("#d3", "#d4", dur)
        }, 4*dur);

        setTimeout(function(){
          $("#d4").fadeOut(dur)
        }, 6*dur);

        window.addEventListener("gameover", function(){
          console.log('over');
          gameOver(t1)
        });
      })
    </script>
</html>
